<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">


























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.0.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.0.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.0.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.0.0">


  <link rel="mask-icon" href="/images/logo.svg?v=7.0.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.0.0',
    sidebar: {"position":"right","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false,"dimmer":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="前记：上一篇 https://www.cnblogs.com/adouwt/p/9211003.html，说到了一个完整的vue插件开发、发布的流程，总结下来就讲了这么一个事，如何注入vue, 如果封装vue插件，如何测试vue插件，以及如何发布vue插件到npm。但是，这里开发测试到发布是分开在两个项目的，未免有些多余，今天的笔记讲的就是在上一篇的基础上，重新换了一下项目框架，讲开发测试，到">
<meta name="keywords" content="vue">
<meta property="og:type" content="article">
<meta property="og:title" content="vue-plugin">
<meta property="og:url" content="https://inote.wtodd.wang/2019/03/01/vue-plugin/index.html">
<meta property="og:site_name" content="ERLingER">
<meta property="og:description" content="前记：上一篇 https://www.cnblogs.com/adouwt/p/9211003.html，说到了一个完整的vue插件开发、发布的流程，总结下来就讲了这么一个事，如何注入vue, 如果封装vue插件，如何测试vue插件，以及如何发布vue插件到npm。但是，这里开发测试到发布是分开在两个项目的，未免有些多余，今天的笔记讲的就是在上一篇的基础上，重新换了一下项目框架，讲开发测试，到">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-03-01T02:18:48.100Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="vue-plugin">
<meta name="twitter:description" content="前记：上一篇 https://www.cnblogs.com/adouwt/p/9211003.html，说到了一个完整的vue插件开发、发布的流程，总结下来就讲了这么一个事，如何注入vue, 如果封装vue插件，如何测试vue插件，以及如何发布vue插件到npm。但是，这里开发测试到发布是分开在两个项目的，未免有些多余，今天的笔记讲的就是在上一篇的基础上，重新换了一下项目框架，讲开发测试，到">






  <link rel="canonical" href="https://inote.wtodd.wang/2019/03/01/vue-plugin/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>vue-plugin | ERLingER</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-right page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">ERLingER</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">nodejs && hexo</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-resources">

    
    
    
      
    

    

    <a href="/resources" rel="section"><i class="menu-item-icon fa fa-fw fa-download"></i> <br>下载</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about" rel="section"><i class="menu-item-icon fa fa-fw fa-about"></i> <br>关于</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://inote.wtodd.wang/2019/03/01/vue-plugin/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="adouwt">
      <meta itemprop="description" content="一个基于hexo的博客，记录一些文章">
      <meta itemprop="image" content="https://pic.cnblogs.com/avatar/1102860/20170208203611.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ERLingER">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">vue-plugin

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              

              
                
              

              <time title="Post created: 2019-02-28 23:31:44" itemprop="dateCreated datePublished" datetime="2019-02-28T23:31:44Z">2019-02-28</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Updated at: 2019-03-01 02:18:48" itemprop="dateModified" datetime="2019-03-01T02:18:48Z">2019-03-01</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/vue/" itemprop="url" rel="index"><span itemprop="name">vue</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>　　前记：上一篇 <a href="https://www.cnblogs.com/adouwt/p/9211003.html，说到了一个完整的vue插件开发、发布的流程，总结下来就讲了这么一个事，如何注入vue" target="_blank" rel="noopener">https://www.cnblogs.com/adouwt/p/9211003.html，说到了一个完整的vue插件开发、发布的流程，总结下来就讲了这么一个事，如何注入vue</a>, 如果封装vue插件，如何测试vue插件，以及如何发布vue插件到npm。但是，这里开发测试到发布是分开在两个项目的，未免有些多余，今天的笔记讲的就是在上一篇的基础上，重新换了一下项目框架，讲开发测试，到打包发布一个完整的项目，这个项目欢迎大家测试使用，一个基于vue上传文件的一个插件，能够显示上传的速度和进度，如果是图片的话，也可以显示上传预览，有bug即时反馈哦！</p>
<p>1.项目架构目录：<br>      这里采用的是vue-cli 脚手架，版本是2.**，vue-cli 3.0 已经出来有一段了。今天暂不用3.0 的，回头会详细说上3.0的打包使用。项目目录如下：</p>
<p>这个项目结构直接用 vue init webapck vue-upload  ,脚手架生的模版，大架构我基本没动，添加了一点自己的配置文件和新加了自己的文件夹。如下：</p>
<p>2.打包插件源码的配置文件<br>var path = require(‘path’)<br>var webpack = require(‘webpack’)</p>
<p>module.exports = {<br>  entry: ‘./src/plugin/ajax-upload.js’,<br>  output: {<br>    path: path.resolve(__dirname, ‘../dist’),<br>    publicPath: ‘/dist/‘,<br>    filename: ‘vueAjaxUpload.js’,<br>    library: ‘vueAjaxUpload’, // library指定的就是你使用require时的模块名，这里便是require(“vueAjaxUpload”)<br>    libraryTarget: ‘umd’, //libraryTarget会生成不同umd的代码,可以只是commonjs标准的，也可以是指amd标准的，也可以只是通过script标签引入的。<br>    umdNamedDefine: true // 会对 UMD 的构建过程中的 AMD 模块进行命名。否则就使用匿名的 define。<br>  },<br>  module: {<br>    rules: [<br>      {<br>        test: /.css$/,<br>        use: [<br>          ‘vue-style-loader’,<br>          ‘css-loader’<br>        ],<br>      },      {<br>        test: /.vue$/,<br>        loader: ‘vue-loader’,<br>        options: {<br>          loaders: {<br>          }<br>          // other vue-loader options go here<br>        }<br>      },<br>      {<br>        test: /.js$/,<br>        loader: ‘babel-loader’,<br>        exclude: /node_modules/<br>      },<br>      {<br>        test: /.(png|jpg|gif|svg)$/,<br>        loader: ‘file-loader’,<br>        options: {<br>          name: ‘[name].[ext]?[hash]’<br>        }<br>      }<br>    ]<br>  },<br>  resolve: {<br>    alias: {<br>      ‘vue$’: ‘vue/dist/vue.esm.js’<br>    },<br>    extensions: [‘*’, ‘.js’, ‘.vue’, ‘.json’]<br>  },<br>  devServer: {<br>    historyApiFallback: true,<br>    noInfo: true,<br>    overlay: true<br>  },<br>  performance: {<br>    hints: false<br>  },<br>  devtool: ‘#eval-source-map’<br>}</p>
<p>if (process.env.NODE_ENV === ‘production’) {<br>  module.exports.devtool = ‘#source-map’<br>  // <a href="http://vue-loader.vuejs.org/en/workflow/production.html" target="_blank" rel="noopener">http://vue-loader.vuejs.org/en/workflow/production.html</a><br>  module.exports.plugins = (module.exports.plugins || []).concat([<br>    new webpack.DefinePlugin({<br>      ‘process.env’: {<br>        NODE_ENV: ‘“production”‘<br>      }<br>    }),<br>    new webpack.optimize.UglifyJsPlugin({<br>      sourceMap: true,<br>      compress: {<br>        warnings: false<br>      }<br>    }),<br>    new webpack.LoaderOptionsPlugin({<br>      minimize: true<br>    })<br>  ])<br>}<br>上面的配置文件也很简单，主要就是入口文件和输出文件，上面红色标记的部分，我们需要经常修改的也是这个两个参数，下面的打包规则我们可以不用多管。</p>
<p>3.package.json 的执行脚本的修改。</p>
<p>4.开发插件<br> 在plugin下，新建ajax-upload.js ajax-upload.vue。</p>
<p>ajax-upload.js</p>
<p>import upload from ‘./ajax-upload.vue’<br>let ajaxUpload = {}<br>ajaxUpload.install = function (Vue, options) {<br>  Vue.prototype.$msg = ‘Hello I am test.js’<br>  Vue.prototype.$myMethod = function (arr) {<br>    if (arr.length &lt; 0) {<br>      return false<br>    } else {<br>      arr = arr.join(‘连接你我’)<br>      return arr<br>    }<br>  }<br>  Vue.component(upload.name, upload)<br>}<br>export default ajaxUpload<br>ajax-upload.vue</p>
<template><br>  <div class="wt-upload"><br>    <div class="file-area"><br>      <div><br>        <input type="file" name="file" id="file" class="file" @change="previewImage($event)" multiple><br>        <label for="file" class="file-label">选择文件</label><br>      </div><br>      <div v-show="options.imagePreview"><br>        <div class="img-preview" ref="imgPreview"><br>        </div><br>      </div><br>      <p class="mt-sm"><br>        <button id="upload" @click="uploadFile(file)" class="upload">上传</button><br>      </p><br>      <div class="progress-area" v-show="options.showProgress ? options.showProgress : false"><br>        <p class="mb-sm">进度显示：</p><br>        <div class="progress"><br>          <div class="progress-bar" id="progress" ref="progress">0%</div><br>        </div><br>        <div><br>          <p class="time" ref="time"></p><br>        </div><br>      </div><br>    </div><br>  </div><br></template><br><script><br>export default {<br>  name: ‘hupload’,<br>  props: [‘options’],<br>  data () {<br>    return {<br>      imgPreview: null,<br>      xhr: null,<br>      loaded: 0,<br>      ot: 0,<br>      total: 0,<br>      oloaded: 0,<br>      file: null<br>    }<br>  },<br>  components: {<br>  },<br>  mounted () {<br>    this.imgPreview = this.$refs.imgPreview<br>  },<br>  created () {<br>    this.xhr = new XMLHttpRequest()<br>  },<br>  methods: {<br>    uploadFile (file) {<br>      if (!file) {<br>        alert(‘请选择文件’)<br>        return<br>      }<br>      if (this.options.limitSize) {<br>        if (file.files[0].size &gt; (this.options.limitSize) <em> 1e6) {<br>          alert(<code>文件大小不得超过${this.options.limitSize}M</code>)<br>          return<br>        }<br>      } else {<br>        if (file.files[0].size &gt; 10000000) {<br>          alert(<code>文件大小不得超过10M</code>)<br>          return<br>        }<br>      }<br>      if (!this.options.fileUploadName) {<br>        alert(‘请配置与后端约定上传的key值’)<br>        return<br>      }<br>      if (!this.options.url) {<br>        alert(‘请配置与后端约定的上传接口地址’)<br>        return<br>      }<br>      let formData = new FormData()<br>      formData.append(this.options.fileUploadName, file.files[0])<br>      this.xhr.onload = this.uploadSuccess<br>      this.xhr.upload.onprogress = this.setProgress<br>      this.xhr.onerror = this.uploadFailed<br>      this.xhr.open(‘post’, this.options.url, true)<br>      this.xhr.send(formData)<br>    },<br>    previewImage (event) {<br>      this.file = event.target<br>      this.imgPreview.innerHTML = ‘’<br>      // 每次重新选择文件的时候，都会去除上次选择产生的img标签<br>      let isImg = (event.target.files[0].type).indexOf(‘image/‘) &gt; -1<br>      if (isImg) {<br>        // 如果是图片 就解析图片预览<br>        let img = document.createElement(‘img’)<br>        this.imgPreview.appendChild(img)<br>        let reader = new FileReader()<br>        reader.onload = function (event) {<br>          img.src = event.target.result<br>          img.width = ‘200’<br>        }<br>        reader.readAsDataURL(event.target.files[0])<br>      } else {<br>        console.log(‘为文件选择一个默认的logo’)<br>      }<br>    },<br>    setProgress (event) {<br>      let progress = this.$refs.progress<br>      // event.total是需要传输的总字节，event.loaded是已经传输的字节。如果event.lengthComputable不为真，则event.total等于0<br>      if (event.lengthComputable) {<br>        this.loaded = event.loaded<br>        this.total = event.total<br>        let complete = (event.loaded / event.total </em> 100).toFixed(1)<br>        progress.innerHTML = Math.round(complete) + ‘%’<br>        progress.style.width = complete + ‘%’<br>      }<br>      // let time = document.getElementById(‘time’)<br>      let time = this.$refs.time<br>      let nt = new Date().getTime() // 获取当前时间<br>      let pertime = (nt - this.ot) / 1000<br>      // 计算出上次调用该方法时到现在的时间差，单位为s<br>      this.ot = new Date().getTime() // 重新赋值时间，用于下次计算<br>      let perload = event.loaded - this.oloaded<br>      // 计算该分段上传的文件大小，单位b<br>      this.oloaded = event.loaded // 重新赋值已上传文件大小，用以下次计算<br>      // 上传速度计算<br>      let speed = perload / pertime // 单位b/s<br>      let bspeed = speed<br>      let units = ‘b/s’ // 单位名称<br>      if (speed / 1024 &gt; 1) {<br>        speed = speed / 1024<br>        units = ‘k/s’<br>      }<br>      if (speed / 1024 &gt; 1) {<br>        speed = speed / 1024<br>        units = ‘M/s’<br>      }<br>      speed = speed.toFixed(1)<br>      // 剩余时间<br>      let resttime = ((event.total - event.loaded) / bspeed).toFixed(1)<br>      resttime = resttime &gt; 0 ? resttime : ‘0’<br>      time.innerHTML = ‘传输速度：’ + speed + units + ‘，剩余时间：’ + resttime + ‘s’<br>    },<br>    uploadSuccess () {<br>      if (this.xhr.readyState === 4 &amp;&amp; this.xhr.status === 200) {<br>        setTimeout(() =&gt; {<br>          // 回调给父组件<br>          this.sendMsgToParent(‘success’)<br>        }, 1000)<br>      }<br>    },<br>    uploadFailed (err) {<br>      console.log(err)<br>      this.sendMsgToParent({‘error’: err})<br>    },<br>    sendMsgToParent (msg) {<br>      this.$emit(‘receiveUploadMsg’, msg)<br>    }<br>  }<br>}<br></script><br><br><!-- 公共的样式 --><br><style><br>  .mb-sm {<br>    margin-bottom: 10px;<br>  }<br>  .mt-sm {<br>    margin-top: 10px;<br>  }<br>  .wt-upload {<br>    text-align: left;<br>  }<br>  .file-area {<br>    width: 80%;<br>    margin: 0 auto;<br>  }<br>  .file-area  .file {<br>    display: none;<br>  }<br>  .wt-upload  .file-label {<br>    display: block;<br>    width: 100px;<br>    padding: 8px;<br>    background: #39D2B4;<br>    color: #fff;<br>    font-size: 1em;<br>    transition: all .4s;<br>    cursor: pointer;<br>    text-align: center;<br>  }<br>  .wt-upload .file-label:hover {<br>    background: rgb(123, 219, 200);<br>  }<br>  .wt-upload .file-label:focus {<br>      background: rgb(32, 148, 125);<br>  }<br>  .wt-upload .img-preview {<br>    margin-top: 20px;<br>    margin-bottom: 20px;<br>  }<br>  .wt-upload  .upload,.wt-upload .abort {<br>    display: inline-block;<br>    width: 100px;<br>    padding: 8px;<br>    background: #39D2B4;<br>    color: #fff;<br>    font-size: 1em;<br>    transition: all .4s;<br>    cursor: pointer;<br>    outline: none;<br>    border: none;<br>  }<br>  .wt-upload  .upload:hover {<br>    background: rgb(123, 219, 200);<br>  }<br>  .wt-upload .upload:focus {<br>    background: rgb(32, 148, 125);<br>  }<br>  .wt-upload .progress-area {<br>    padding: 20px;<br>  }<br>  .wt-upload .progress {<br>    display: -webkit-box;<br>    display: -ms-flexbox;<br>    display: flex;<br>    height: 1rem;<br>    overflow: hidden;<br>    font-size: 0.75rem;<br>    background-color: #e9ecef;<br>    border-radius: 0.25rem;<br>  }<br>  .wt-upload  .progress-bar {<br>    display: -webkit-box;<br>    display: -ms-flexbox;<br>    display: flex;<br>    -webkit-box-orient: vertical;<br>    -webkit-box-direction: normal;<br>    -ms-flex-direction: column;<br>    flex-direction: column;<br>    -webkit-box-pack: center;<br>    -ms-flex-pack: center;<br>    justify-content: center;<br>    color: #fff;<br>    text-align: center;<br>    background-color: #007bff;<br>    transition: width 0.6s ease;<br>  }<br>  .wt-upload .time {<br>    margin-top: 10px;<br>  }<br></style><br>ajax-upload.js的讲解： 引入同级目录的ajax-upload.vue ，通过给一个自定义的对象添加install 方法，然后通过vue.component 方法注册到vue。这里也可以给vue,通过原型方法注册变量和方法。这里我们不需要，我们就只做了一个demo；<br><br>ajax-upload.vue的讲解：里面具体的js业务逻辑不讲解了，就提个 props，和name 的属性，我们通过这个方法接受到父组件（调用该组件的组件）传递过来的参数，然后可以通过我们的定义的方法，如果是必须传递的参数，没有该参数我们就alert 提示;name 属性就是调用的封装的标签。为了减少项目的依赖插件的个数，我们也直接使用css不使用less等。<br><br>5.本地测试开发的插件的使用：<br>在dev文件夹下新建文件 dev-upload.vue<br><br><br><br>代码：<br><br><template><br>    <div><br>        <h2>开发测试</h2><br>        <hupload :options="options" v-on:receiveuploadmsg="receiveUploadMsg"> </hupload><br>    </div><br></template>

<script>
import Vue from 'vue'
import hupload from '../plugin/ajax-upload.js'
Vue.use(hupload)
export default {
    data () {
        return {
            options: {
                'showProgress': true,
                'imagePreview': true,
                'url': 'str',
                'fileUploadName': 'ajax-upload',
                'limitSize': 1
            }
        }
    },
    components: {
    },
    methods: {
        receiveUploadMsg (msg) {
            console.log(msg)
        }
    }
}
</script>

<p><style><br></style><br>这里使用组件就不直接在main.js下引入插件，直接在使用该插件的组件中，引入，然后通过vue.use 的方法使用组件：</p>
<p>import Vue from ‘vue’<br>import hupload from ‘../plugin/ajax-upload.js’<br>Vue.use(hupload)<br>使用组件，传递参数和接受参数</p>
<p><hupload :options="options" v-on:receiveuploadmsg="receiveUploadMsg"> </hupload><br>这里组件的通信 父组件 -&gt; 子组件， 子组件 -&gt; 父组件 ，通过props 接受到父组件的参数，通过事件的方式接受子组件传递过来的参数。</p>
<p>当然，要看到这个组件的使用是否正确，就要看页面了，页面路由 vue-router 如下：</p>
<p>访问页面正常显示，没有报错：</p>
<p>6.打包插件,并本地测试插件<br>上面第5步骤已经展示了插件是可以使用的，接下里就是打包了。</p>
<p>执行：</p>
<p>npm run dist</p>
<p> 本地测试，先开页面路由：</p>
<p> 访问页面，没有报错：</p>
<p>以上看到了插件的引入方式不同。</p>
<p>7.发布插件<br>测试OK了，接下里就是发布了（假设你这里已经登陆npm了），执行命令：</p>
<p>npm publish</p>
<p>记住，每发布一次，需要修改package.json 的版本号：</p>
<p> 不然报错。</p>
<p> 发布完之后，我们就可以转到我们的npm 官网上看看我们的项目。</p>
<p><a href="https://www.npmjs.com/package/vue-ajax-upload" target="_blank" rel="noopener">https://www.npmjs.com/package/vue-ajax-upload</a></p>
<p>8.使用插件<br>安装使用：<br>npm install vue-ajax-upload –save</p>
<p>测试：</p>
<p> 访问页面：</p>
<p>注意：大大的红字，如果要在本项目下测试，需要修改package.json 项目名称，不然报项目名字和包名字是一致的错，无法安装的,如下；</p>
<p>　　结束语： 这个笔记继上一篇 vue插件开发流程详解-从开发到发布至npm（一），替换了开发和测试的项目架构。除了在npm 登陆的那快，基本都是可以跳过上一篇，直接看这篇的，这个插件可以显示上传图片预览，上传速度和上传进度，如果需要讲解这部分话，请在下方留言，我会单独开一篇讲解这部分的内容。接下来的任务，还是需要做的vue 插件按需加载插件的方法，尽情期待我下一篇的笔记。如有不足，敬请指教，</p>
<p>如果觉得好的话，GitHub项目地址，麻烦给个star 呀！</p>
<pre><code>如需转载，请说明转载出处。
</code></pre>
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/vue/" rel="tag"># vue</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/03/01/git/" rel="next" title="git">
                <i class="fa fa-chevron-left"></i> git
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/03/01/hello-world/" rel="prev" title="Hello World">
                Hello World <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Inhaltsverzeichnis
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Übersicht
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="https://pic.cnblogs.com/avatar/1102860/20170208203611.png" alt="adouwt">
            
              <p class="site-author-name" itemprop="name">adouwt</p>
              <p class="site-description motion-element" itemprop="description">一个基于hexo的博客，记录一些文章</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives">
                
                    <span class="site-state-item-count">8</span>
                    <span class="site-state-item-name">Artikel</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">4</span>
                    <span class="site-state-item-name">Kategorien</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">6</span>
                    <span class="site-state-item-name">Tags</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/adouwt" title="GitHub &rarr; https://github.com/adouwt" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:wtodd202@163.com" title="E-Mail &rarr; mailto:wtodd202@163.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="http://www.cnblogs.com/adouwt/" title="博客园 &rarr; http://www.cnblogs.com/adouwt/" rel="noopener" target="_blank"><i class="fa fa-fw fa-博客园"></i>博客园</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://yq.aliyun.com/users/article?spm=a2c4e.11155435.0.0.350524f0QtCZw8" title="云栖社区 &rarr; https://yq.aliyun.com/users/article?spm=a2c4e.11155435.0.0.350524f0QtCZw8" rel="noopener" target="_blank"><i class="fa fa-fw fa-云栖社区"></i>云栖社区</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#undefined"><span class="nav-number">1.</span> <span class="nav-text">开发测试</span></a></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">adouwt</span>

  

  
</div>


  <div class="powered-by">Erstellt mit  <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.0.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=7.0.0"></script>

  <script src="/js/src/motion.js?v=7.0.0"></script>



  
  


  <script src="/js/src/affix.js?v=7.0.0"></script>

  <script src="/js/src/schemes/pisces.js?v=7.0.0"></script>



  
  <script src="/js/src/scrollspy.js?v=7.0.0"></script>
<script src="/js/src/post-details.js?v=7.0.0"></script>



  


  <script src="/js/src/bootstrap.js?v=7.0.0"></script>


  
  


  


  




  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
